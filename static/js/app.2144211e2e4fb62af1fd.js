webpackJsonp([1],{"+7R9":function(o,t){},0:function(o,t){},1:function(o,t){},"991W":function(o,t){},Iin3:function(o,t){},NHnr:function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("7+uW"),s=e("XyMi");var i=function(o){e("Iin3")},a=Object(s.a)({name:"App"},function(){var o=this.$createElement,t=this._self._c||o;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},[],!1,i,null,null).exports,l=e("/ocq"),r=e("VXRH"),c=e("fZjL"),h=e.n(c),u=e("+v63"),p=e("te2A"),d=(Boolean,String,String,Boolean,Boolean,Boolean,String,String,Object,Boolean,Boolean,Boolean,{name:"popup",props:{value:Boolean,height:{type:String,default:"auto"},width:{type:String,default:"auto"},showMask:{type:Boolean,default:!0},isTransparent:Boolean,hideOnBlur:{type:Boolean,default:!0},position:{type:String,default:"bottom"},maxHeight:String,popupStyle:Object,hideOnDeactivated:{type:Boolean,default:!0},shouldRerenderOnShow:{type:Boolean,default:!1},shouldScrollTopOnShow:{type:Boolean,default:!1}},created:function(){this.$vux&&this.$vux.config&&"VIEW_BOX"===this.$vux.config.$layout&&(this.layout="VIEW_BOX")},mounted:function(){var o=this;this.$overflowScrollingList=document.querySelectorAll(".vux-fix-safari-overflow-scrolling"),this.$nextTick(function(){var t=o;o.popup=new u.a({showMask:t.showMask,container:t.$el,hideOnBlur:t.hideOnBlur,onOpen:function(){t.fixSafariOverflowScrolling("auto"),t.show=!0},onClose:function(){t.show=!1,window.__$vuxPopups&&h()(window.__$vuxPopups).length>1||document.querySelector(".vux-popup-dialog.vux-popup-mask-disabled")||setTimeout(function(){t.fixSafariOverflowScrolling("touch")},300)}}),o.value&&o.popup.show(),o.initialShow=!1})},deactivated:function(){this.hideOnDeactivated&&(this.show=!1),this.removeModalClassName()},methods:{fixSafariOverflowScrolling:function(o){if(this.$overflowScrollingList.length)for(var t=0;t<this.$overflowScrollingList.length;t++)this.$overflowScrollingList[t].style.webkitOverflowScrolling=o},removeModalClassName:function(){"VIEW_BOX"===this.layout&&p.a.removeClass(document.body,"vux-modal-open")},doShow:function(){this.popup&&this.popup.show(),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),"VIEW_BOX"===this.layout&&p.a.addClass(document.body,"vux-modal-open"),this.hasFirstShow||(this.$emit("on-first-show"),this.hasFirstShow=!0)},scrollTop:function(){var o=this;this.$nextTick(function(){o.$el.scrollTop=0;var t=o.$el.querySelectorAll(".vux-scrollable");if(t.length)for(var e=0;e<t.length;e++)t[e].scrollTop=0})}},data:function(){return{layout:"",initialShow:!0,hasFirstShow:!1,shouldRenderBody:!0,show:this.value}},computed:{styles:function(){var o={};if(this.position&&"bottom"!==this.position&&"top"!==this.position?o.width=this.width:o.height=this.height,this.maxHeight&&(o["max-height"]=this.maxHeight),this.isTransparent&&(o.background="transparent"),this.popupStyle)for(var t in this.popupStyle)o[t]=this.popupStyle[t];return o}},watch:{value:function(o){this.show=o},show:function(o){var t=this;this.$emit("input",o),o?this.shouldRerenderOnShow?(this.shouldRenderBody=!1,this.$nextTick(function(){t.scrollTop(),t.shouldRenderBody=!0,t.doShow()})):(this.shouldScrollTopOnShow&&this.scrollTop(),this.doShow()):(this.$emit("on-hide"),this.show=!1,this.popup.hide(!1),setTimeout(function(){document.querySelector(".vux-popup-dialog.vux-popup-show")||t.fixSafariOverflowScrolling("touch"),t.removeModalClassName()},200))}},beforeDestroy:function(){this.popup&&this.popup.destroy(),this.fixSafariOverflowScrolling("touch"),this.removeModalClassName()}});var f=function(o){e("WIFb")},v=Object(s.a)(d,function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("transition",{attrs:{name:"vux-popup-animate-"+o.position}},[e("div",{directives:[{name:"show",rawName:"v-show",value:o.show&&!o.initialShow,expression:"show && !initialShow"}],staticClass:"vux-popup-dialog",class:["vux-popup-"+o.position,o.show?"vux-popup-show":""],style:o.styles},[o.shouldRenderBody?o._t("default"):o._e()],2)])},[],!1,f,null,null).exports,w=e("63CM"),m=(w.a,{name:"rViewer",directives:{TransferDom:w.a},components:{Popup:v},data:function(){return{showMenus:!1,showContents:!1,showProgress:!1,showTools:!1,book:null,bookTitle:null,rendition:null,navigation:null,fontSize:16,curFontColor:"white",themesList:[{name:"light-blue",style:{body:{color:"#000",background:"#eefaff"}}},{name:"green",style:{body:{color:"#000",background:"#edf6d0"}}},{name:"earth-yellow",style:{body:{color:"#000",background:"#f6f1e7"}}},{name:"black",style:{body:{color:"#fff",background:"#222"}}},{name:"white",style:{body:{color:"#000",background:"#f9f9f9"}}}]}},mounted:function(){console.log("view mounted"),this.initReader()},methods:{initReader:function(){var o=this;o.book=new r.a("static/超级时间.epub"),console.log("vm.book",o.book),o.rendition=o.book.renderTo("read",{width:window.innerWidth,height:window.innerHeight}),o.rendition.display(),o.rendition.themes&&(o.themesList&&o.themesList.forEach(function(t){o.rendition.themes.register(t.name,t.style)}),o.rendition.themes.select("white"))},nextPage:function(){this.rendition&&this.rendition.next()},prevPage:function(){this.rendition&&this.rendition.prev()},onClick:function(o){var t=this;if(t.showMenus)t.showMenus=!1;else if(t.showContents)t.showContents=!1;else if(t.showTools)t.showTools=!1;else{var e=document.body.clientWidth/8;console.log("unit=",3*e),o.offsetX<3*e?t.prevPage():o.offsetX>5*e?t.nextPage():t.showMenus=!0}},onClickMenus:function(o){var t=this;switch(t.showMenus=!1,o){case"contents":t.navigation=t.book.navigation,t.showContents=!0,t.bookTitle=t.book.package.metadata.title,console.log("vm.book=",t.book);break;case"progress":t.showProgress=!0;break;case"tools":t.showTools=!0}},onfontAdd:function(){if(this.fontSize>=30)return!1;this.fontSize+=2,this.rendition.themes.fontSize(this.fontSize+"px")},onfontMinus:function(){if(this.fontSize<=13)return!1;this.fontSize-=2,this.rendition.themes.fontSize(this.fontSize+"px")},onSelectTheme:function(o){this.curFontColor=o,this.rendition.themes&&this.rendition.themes.select(o)},onToChapter:function(o){this.rendition&&(console.log("href=",o),this.rendition.display(o),this.showContents=!1)}}});var g=function(o){e("+7R9")},k=Object(s.a)(m,function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"r-viewer"},[e("div",{staticClass:"r-v-mask",class:{"show-tool-menu-mask":o.showMenus||o.showContents||o.showProgress||o.showTools},on:{click:function(t){return o.onClick(t)}}}),o._v(" "),e("div",{attrs:{id:"read"}}),o._v(" "),e("footer",[e("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[e("Popup",{attrs:{position:"bottom","show-mask":!1},model:{value:o.showMenus,callback:function(t){o.showMenus=t},expression:"showMenus"}},[e("div",{staticClass:"menu-contents"},[e("span",{staticClass:"contents",on:{click:function(t){return o.onClickMenus("contents")}}},[o._v("目录")]),o._v(" "),e("span",{staticClass:"progress-bar",on:{click:function(t){return o.onClickMenus("progress-bar")}}},[o._v("进度")]),o._v(" "),e("span",{staticClass:"tools",on:{click:function(t){return o.onClickMenus("tools")}}},[o._v("设置")])])]),o._v(" "),e("Popup",{attrs:{position:"right",width:"100%","show-mask":!1},model:{value:o.showContents,callback:function(t){o.showContents=t},expression:"showContents"}},[e("div",{staticClass:"contents"},[e("header",[e("span",{staticClass:"back",on:{click:function(t){o.showContents=!1}}},[o._v("返回")]),o._v(" "),e("span",{staticClass:"title"},[o._v(o._s(o.bookTitle))]),o._v(" "),e("span",{staticClass:"more"},[o._v("···")])]),o._v(" "),o.navigation&&o.navigation.toc?e("div",{staticClass:"contents-items"},o._l(o.navigation.toc,function(t){return e("p",{key:t.id,staticClass:"item",on:{click:function(e){return o.onToChapter(t.href)}}},[o._v("\n              "+o._s(t.label)+"\n            ")])}),0):o._e()])]),o._v(" "),e("Popup",{attrs:{position:"bottom","show-mask":!1},model:{value:o.showTools,callback:function(t){o.showTools=t},expression:"showTools"}},[e("div",{staticClass:"tools-contents"},[e("div",{staticClass:"fonts"},[e("p",{staticClass:"size add",on:{click:o.onfontAdd}},[o._v("A"),e("span",[o._v("+")])]),o._v(" "),e("p",{staticClass:"size num",on:{click:o.onfontAdd}},[o._v(o._s(o.fontSize))]),o._v(" "),e("p",{staticClass:"size minus",on:{click:o.onfontMinus}},[o._v("A"),e("span",[o._v("-")])])]),o._v(" "),e("div",{staticClass:"colors"},o._l(o.themesList,function(t){return e("p",{key:t.name,staticClass:"color",class:t.name,on:{click:function(e){return o.onSelectTheme(t.name)}}},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-checkmark-empty not-select",class:{selected:o.curFontColor==t.name},attrs:{type:"ios-checkmark-empty",size:"32",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 512 512"}},[e("path",{attrs:{d:"M223.9 329.7c-2.4 2.4-5.8 4.4-8.8 4.4s-6.4-2.1-8.9-4.5l-56-56 17.8-17.8 47.2 47.2L340 177.3l17.5 18.1-133.6 134.3z"}})])])}),0)])])],1)])])},[],!1,g,"data-v-9ffbe036",null).exports;n.a.use(l.a);var S=new l.a({routes:[{path:"/",name:"readerViewer",component:k}]});e("991W");n.a.config.productionTip=!1,new n.a({el:"#app",router:S,components:{App:a},template:"<App/>"})},WIFb:function(o,t){}},["NHnr"]);
//# sourceMappingURL=app.2144211e2e4fb62af1fd.js.map